# mercator

A computer game implementation of a ***closed economical simulation***.<br>
The current world is generated procedurally and includes %d cities, %d factories, %d traders and %d sims.<br>
The amount of wealth in the system, including products and money is constant at all times.<br>
Factories pay wages to sims to produce goods that are sold on a free market.<br>
Some sims are traders that buy products in one city and sell them with profit in another city.<br>
All sims have needs that they need to fulfill else they die.<br>
All sims have cravings that they need to fulfill to keep their satisfaction level up.<br>
All sounds are generated by a openal based audio render engine for libgdx supporting procedurally generated audio using
**HRTF**.<br>
Demo song is 'abyss' by Abdalla Bushnaq.<br>
Work in progress...<br>
Developed using libgdx and gdx-gltf open source frameworks.<br>

## How To Run

mercator is still in development, so you will have to open it in a IDE like eclipse or IntelliJ.<br>
After that, you need to crete the atlas map by running GenerateAtlasTest.java test.
Then you can start mercator by one of its starting classes

1. Launcher2D Launches mercator 2D mode (planned to be used when zooming out).
2. Launcher3D Launches mercator 3D mode.
3. Launcher3DDemo Launches mercator 2D demo mode.
4. Launcher3DDeveMode Launches mercator 3D developer mode (paths have labels).

## Key mapping

| key(s)                | description                     |
|-----------------------|---------------------------------|
| a, w, d, s            | move camera                     |
| left, up, right, down | move camera                     |
| ESC                   | quit                            |
| pause                 | pause/unpause                   |
| print                 | print screen/                   |
| tab                   | show profiler in scene manager  |
| f                     | follow selected trader          |
| h                     | enable/disable hrtf audio       |
| i                     | enable/disable information      |
| v                     | enable/disable vsync            |
| F1                    | enable/disable gamma correction |
| F2                    | enable/disable depth of field   |
| F3                    | enable/disable bokeh            |
| F4                    | enable/disable ssao             |
| F5                    | enable/disable always day       |
| F6                    | enable/disable demo mode        |
| F7                    |                                 |
| F8                    |                                 |
| F9                    | enable/disable graphs           |
| F10                   | enable/disable debug mode       |
| F11                   |                                 |
| F12                   |                                 |

## Issues

- remove trader detailed info in 3D as it does not go well with depth of field effect.
- light bokeh grows too fast with distance
- there should be the possibility to select a ship but still hear the station chat
- factory goods keep making static cache dirty
- pipes visible through hanger door.
- Economy is not stable, all sims eventually die of hunger.
- simulation advanceintime is triggered every frame.
- ensure adding/removing lights does not cause any caching to get dirty.
- optimize selected path performance
- audio engine cannot switch to new audio output.
-
- Fixed? add all spoken messages to event manager.
- Fixed? subtitles now are missing message endings like ., ?, !.
- Fixed? subtitles include <> tags sometimes.
- fixed?. java.lang.RuntimeException: TTS service returned error 500: {"error":"float division by zero"} for
  text: '</p>'.

## Tasks

- remove universe time in gui in demo mode
- remove info text bottom left in demo mode
- remove quotation marks around subtitles.
- add back background under subtitle
- break down subtitle if too long.
- remove "" from tts subtitles
- stations should be further apart.
- add demo scheduled effect to blend in, maybe camera to follow nearest trader?
- fix ships will collide while navigating from planet to planet.
- add SSAO
- fix openAL error when stopping demo mode

# Bugs
